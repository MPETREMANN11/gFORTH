\ *********************************************************************
\ Meta compiler for generating Xross compiled code                    *
\    Filename:      meta.txt                                          *
\    Date:          26.03.2021                                        *
\    Updated:       29.03.2021                                        *
\    MCU:           gForth                                            *
\    Copyright:     Marc PETREMANN                                    *
\    Author:        Marc PETREMANN                                    *
\ *********************************************************************

\ meta contains the meta-compiler
vocabulary meta               
    meta also meta definitions

\ immediate version of only for vocabulary chaining
: [only] ( ---)               
    only 
; immediate

\ immediate version of forth for vocabulary chaining
: [forth] ( ---)
    forth
; immediate

\ immediate version of meta for vocabulary chaining
: [meta] ( ---)               
    meta
; immediate


\ Variables and work options for metacompiler
variable    WIDTH     31 WIDTH !  \ Headers: nfa size
variable    LAST-T                \ Latest nfa compiled
variable    CONTEXT-T             \ context metavocabulary
variable    CURRENT-T             \ current metavocabulary
variable    CHECKING              \ Compilation asservie
variable    FORCE                 \ Forced compilation
variable    VALID     VALID on    \ Validity of current definition
variable    OLD-T                 \ Old position in target
variable    SAVING    SAVING on   \ Saving option

